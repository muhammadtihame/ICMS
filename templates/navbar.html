{% load i18n%}
<div id="top-navbar" class="py-1">
	<div class="container">
		<div class="nav-wrapper align-items-center">

			<div class="flex-grow-1 text-center d-none d-md-block">
				<h1 class="site-title h5 m-0 text-white text-uppercase">
					KASHMIR COLLEGE OF ENGINEERING AND TECHNOLOGY
				</h1>
				{% if ticker_items %}
				<div class="announcement-ticker mt-1">
					<div class="ticker-container">
						<div class="ticker-content">
							{% for item in ticker_items %}
								<a href="{% url 'home' %}" class="ticker-item" title="Click to view News & Events">
									<i class="fas fa-bullhorn me-1"></i>
									{{ item.title }}
								</a>
							{% endfor %}
						</div>
					</div>
					{% if can_add_news %}
						<a class="btn btn-sm btn-light ms-2" href="{% url 'add_item' %}">
							<i class="fas fa-plus me-1"></i> Add new post
						</a>
					{% endif %}
				</div>
				{% endif %}
			</div>

			<div class="toggle-btn" onclick="toggleSidebar()">
				<i class="fas fa-bars"></i>
			</div>

			<form class="form-header" action="{% url 'query' %}" method="GET">
				<input id="primary-search" class="form-control rounded-end-0" type="text" name="q" value="{{ request.GET.q }}"
					data-universal-search="true"
					placeholder="{% trans 'Search students, lecturers, courses, news...' %}" required />
				<button class="btn btn-dark rounded-start-0" type="submit">
					<i class="fas fa-search"></i>
				</button>
			</form>

			<div class="dropdown">
				<div class="avatar border border-2" type="button" data-bs-toggle="dropdown" aria-expanded="false">
					<img src="{{ request.user.picture.url }}">
				</div>
				<div class="dropdown-menu" style="min-width: 14rem !important;">
					<div class="d-flex flex-column align-items-center">
						<div class="avatar avatar-md border">
							<img src="{{ request.user.picture.url }}">
						</div>
						<p class="small text-muted text-center mb-0">
							{% trans 'Last login:' %} {{ request.user.last_login|date }}</p>
					</div>
					<hr>

					{% if request.user.is_lecturer or request.user.is_student %}
					<a class="dropdown-item" href="{% url 'user_course_list' %}"><i class="fas fa-book me-2"></i>{% trans 'My Courses' %}</a>
					{% endif %}

					{% if request.user.is_superuser %}
					<a class="dropdown-item" href="{% url 'admin_panel' %}"><i class="fas fa-user-tie me-2"></i>{% trans 'Admin Panel' %}</a>
					{% endif %}

					{% if request.user.is_staff %}
					<a class="dropdown-item" href="{% url 'tuition_fee_dashboard' %}"><i class="fas fa-dollar-sign me-2"></i>{% trans 'Tuition Fee Management' %}</a>
					{% elif request.user.is_student %}
					<a class="dropdown-item" href="{% url 'student_tuition_fees' request.user.id %}"><i class="fas fa-dollar-sign me-2"></i>{% trans 'My Tuition Fees' %}</a>
					{% endif %}

					<a class="dropdown-item" href="{% url 'profile' %}"><i class="fas fa-user me-2"></i>{% trans 'Profile' %}</a>
					<a class="dropdown-item" href="{% url 'edit_profile' %}"><i class="fas fa-cog me-2"></i>{% trans 'Setting' %}</a>
					<hr>
					<div style="display: flex; justify-content: center; align-items: center;">
						<a class="btn btn-secondary" href="{% url 'logout' %}">
							<i class="fas fa-sign-out-alt"></i> {% trans 'Signout' %}
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>